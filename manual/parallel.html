<!doctype html>
<html>
	<head>
		<title>Manual refresh</title>
	</head>
	<body>
		<h1 id="data-a"></h1>
		<h1 id="data-b"></h1>

		<script>
			var request = new XMLHttpRequest();

			var getData = function(selector) {
				var request = new XMLHttpRequest();
				request.open('GET', '/short-poll-data', true);

				request.onload = function() {
					if (request.status >= 200 && request.status < 400) {
						var resp = request.responseText;
						document.querySelector(selector).innerHTML = resp;
					} else {
						console.error('Error occurred', request);
					}
				};

				request.onerror = function() {
					console.error('Error occurred', request);
				};

				request.send();
			};

			getData('#data-a');
			getData('#data-b');
		</script>
	</body>
</html>
